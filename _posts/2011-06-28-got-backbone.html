---
layout: post
title: "Got a backbone?"
date: 2011-06-28
comments: false
categories:
 - javascript
 - unit testing
 - code
 - object oriented design
 - mocking
 - web
---

<div class='post'>
Earlier, I posted about those lame <a href="http://timkellogg.blogspot.com/2011/05/hipster-developers.html#links">hipster developers</a>, as I call them. Mainly, I just find it a little hard to believe that anyone can create a truly scalable JavaScript app using <a href="http://nodejs.org/">node</a>.<br /><br />Recently I stumbled into <a href="http://documentcloud.github.com/backbone/">Backbone</a> (or rather I kept on hearing about it and finally checked it out). Backbone is a bare bones MVC framework for JavaScript that is meant to help give your JavaScript apps structure without weighing them down. Also, more important, is that Backbone is by no means mutually exclusive with jQuery. Actually they compliment each other quite nicely.<br /><br />Back to those hipster developers. I don't often like to admit that a badly dressed 20-year-old can be right, and I still won't go so far as saying node.js is really a presentable solution for anything on the server, but the fact that they're expanding the infrastructure around JavaScript is really pushing me to think about how I can evolve my own .NET work. For me, Backbone is where it starts.<br /><br /><span class="Apple-style-span" style="font-size: large;">An Answer to Uncontrollably Messy JavaScript</span><br />I've written a lot of pages with big long blocks of jQuery chains and anonymous functions. It's such a huge pain to maintain or refactor that I sometimes end up rewriting. Part of the problem is just simply that the code is messy. But even when I break it down into smaller nugget sized functions I still have a fist-full of spaghetti code that is prone to unchecked regressions. I definitely need to test my code but<br /><br />Backbone lets you organize your code into Models, Views and Controllers and Collections. If you go all the way with Backbone, you're going to be creating pageless apps where you load the page the first time, and you never reload the page (like GMail). Everything is data fed to the page via JSON services. Controllers let you bind bookmarks to functions (i.e. when a link gets clicked where href="#!/inbox" the link gets routed to an inbox function and handled there). Views bind models to HTML. They also keep the models bound to the HTML, so when newer fresher data arrives, the models are rebound to the page where necessary.<br /><br />By modularizing code according to the MVC pattern, unit testing becomes significantly easier. Most of your normal issues like mocking the DOM &amp; XHR become less important because your code is broken into smaller pieces. Besides being easier to test, it's just plain easier to understand also.<br /><br />When testing, if you do require mocking facilities, I've heard that <a href="http://sinonjs.org/">SinonJS</a> is excellent for all types of mocking, and comes with built in server &amp; XHR mocks. Also, a coworker is pushing me towards&nbsp;<a href="http://behaviour-driven.org/">Behavior Driven Development</a>&nbsp;and so <a href="http://pivotal.github.com/jasmine/">Jasmine</a> is a natural winner for a test framework.<br /><br />I've heard people stress that Backbone is for web applications, not web sites. But at the same time, I don't think you need to go completely single-page to use Backbone either. In .NET, I don't really want to go single-page because MVC provides so much. But some of my pages that involve several page states could be dramatically simplified with an MVC approach. At bare minimum, I want to be able to simplify and test my client-side logic.</div>
